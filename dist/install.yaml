apiVersion: v1
kind: Namespace
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
    control-plane: controller-manager
  name: fanet-operator-system
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.0
  name: drones.fanet.restart.io
spec:
  group: fanet.restart.io
  names:
    kind: Drone
    listKind: DroneList
    plural: drones
    shortNames:
    - dr
    singular: drone
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Current operational status of the drone
      jsonPath: .status.operationalStatus
      name: OperationalStatus
      type: string
    - description: FANET this drone is assigned to
      jsonPath: .status.fanetRef.name
      name: FANET
      type: string
    - description: Current battery level percentage
      jsonPath: .status.batteryLevel
      name: BatteryLevel
      type: integer
    - description: Indicates if this is a computing drone
      jsonPath: .status.computingDrone
      name: ComputingDrone
      type: boolean
    - description: Indicates if the node is ready
      jsonPath: .status.nodeReady
      name: NodeReady
      type: boolean
    - description: Available CPU
      jsonPath: .status.cpuAvailable
      name: CPUAvailable
      type: string
    - description: Available memory
      jsonPath: .status.memoryAvailable
      name: MemoryAvailable
      type: string
    - description: Number of virtual functions running on this drone
      jsonPath: .status.vfCount
      name: VFCount
      type: integer
    - description: Age of the drone
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    - description: Last update timestamp
      jsonPath: .status.lastUpdated
      name: LastUpdated
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Drone is the Schema for the drones API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: DroneSpec defines the desired state of Drone.
            properties:
              batteryCapacity:
                description: BatteryCapacity is the battery capacity in Wh
                type: integer
              ceIdleConsumptionWh:
                description: CEIdleConsumptionWh is the CE idle consumption in Wh
                type: string
              computingDrone:
                description: ComputingDrone indicates if this is a computing drone
                type: boolean
              fanetRef:
                description: FanetRef references the FANET this drone belongs to
                properties:
                  name:
                    type: string
                required:
                - name
                type: object
              motorIdleConsumptionWh:
                description: MotorIdleConsumptionWh is the motor idle consumption
                  in Wh
                type: string
              nodeRef:
                description: NodeRef references the Kubernetes node
                properties:
                  name:
                    type: string
                required:
                - name
                type: object
            type: object
          status:
            description: DroneStatus defines the observed state of Drone.
            properties:
              batteryLevel:
                description: BatteryLevel is the current battery level percentage
                type: integer
              ceMaxCapacity:
                description: CEMaxCapacity is the maximum capacity of the CE
                properties:
                  cpu:
                    type: string
                  memory:
                    type: string
                type: object
              computingDrone:
                description: ComputingDrone indicates if this is a computing drone
                type: boolean
              cpuAvailable:
                description: CPUAvailable is the available CPU
                type: string
              fanetRef:
                description: FanetRef references the FANET this drone is assigned
                  to
                properties:
                  name:
                    type: string
                required:
                - name
                type: object
              lastUpdated:
                description: LastUpdated is the last update timestamp
                type: string
              memoryAvailable:
                description: MemoryAvailable is the available memory
                type: string
              nodeReady:
                description: NodeReady indicates if the node is ready
                type: boolean
              operationalStatus:
                default: NotAvailable
                description: |-
                  OperationalStatus is the current operational status of the drone
                  Valid values are:
                  - Flying: The drone is currently in flight.
                  - Leaving: The drone is in the process of leaving.
                  - NotAvailable (default): The drone is not available or its status is unknown.
                enum:
                - Flying
                - Leaving
                - NotAvailable
                type: string
              vfCount:
                description: VFCount is the number of virtual functions running on
                  this drone
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.0
  name: fanets.fanet.restart.io
spec:
  group: fanet.restart.io
  names:
    kind: Fanet
    listKind: FanetList
    plural: fanets
    shortNames:
    - fn
    singular: fanet
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Total number of drones in the FANET
      jsonPath: .status.totalDroneCount
      name: TotalDrones
      type: integer
    - description: Number of drones in flight
      jsonPath: .status.inFlightCount
      name: InFlight
      type: integer
    - description: Number of drones leaving
      jsonPath: .status.leavingCount
      name: Leaving
      type: integer
    - description: Number of drones not available
      jsonPath: .status.notAvailableCount
      name: NotAvailable
      type: integer
    - description: Total number of virtual functions in the FANET
      jsonPath: .status.vfTotal
      name: VFTotal
      type: integer
    - description: Age of the FANET
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Fanet is the Schema for the fanets API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: FanetSpec defines the desired state of Fanet.
            properties:
              drones:
                description: Drones is the list of drones in this FANET
                items:
                  description: DroneReference contains reference to a Drone
                  properties:
                    name:
                      description: NodeRef is the reference to the node the drone
                        is hosting
                      type: string
                    nodeRef:
                      description: DroneName is the name of the drone
                      properties:
                        name:
                          type: string
                      required:
                      - name
                      type: object
                  required:
                  - name
                  type: object
                type: array
            type: object
          status:
            description: FanetStatus defines the observed state of Fanet.
            properties:
              droneStatuses:
                description: DroneStatuses is the status of each drone
                items:
                  description: DroneStatusInfo contains status information about a
                    drone
                  properties:
                    batteryLevel:
                      type: integer
                    computingDrone:
                      type: boolean
                    cpuAvailable:
                      type: string
                    droneName:
                      type: string
                    memoryAvailable:
                      type: string
                    nodeReady:
                      type: boolean
                    operationalStatus:
                      description: |-
                        OperationalStatus describes the operational status of the drone.
                        Only one of the following statuses can be set at a time.
                        If none of the following statuses is set, the status is considered unknown.
                      enum:
                      - Flying
                      - Leaving
                      - NotAvailable
                      type: string
                    vfCount:
                      type: integer
                  required:
                  - droneName
                  type: object
                type: array
              inFlightCount:
                description: InFlightCount is the number of drones in flight
                type: integer
              leavingCount:
                description: LeavingCount is the number of drones leaving
                type: integer
              notAvailableCount:
                description: NotAvailableCount is the number of drones not available
                type: integer
              totalDroneCount:
                description: TotalDroneCount is the total number of drones
                type: integer
              vfTotal:
                description: VFTotal is the total number of virtual functions
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.0
  name: servicechains.fanet.restart.io
spec:
  group: fanet.restart.io
  names:
    kind: ServiceChain
    listKind: ServiceChainList
    plural: servicechains
    singular: servicechain
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Number of Virtual Functions
      jsonPath: .status.vfCount
      name: VFCount
      type: integer
    - description: Total VF Latency (ms)
      jsonPath: .status.totalVfLatency
      name: TotalVFLatency
      type: integer
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ServiceChain is the Schema for the servicechains API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ServiceChainSpec defines the desired state of ServiceChain.
            properties:
              functions:
                description: Functions is the list of virtual functions in this service
                  chain
                items:
                  description: FunctionSpec defines a function in a service chain
                  properties:
                    activeEnergyConsumptionWh:
                      description: ActiveEnergyConsumptionWh is the active energy
                        consumption
                      type: string
                    args:
                      description: Args are the container arguments
                      items:
                        type: string
                      type: array
                    droneRef:
                      description: DroneRef references the drone to deploy on
                      properties:
                        apiVersion:
                          description: API version of the referent.
                          type: string
                        fieldPath:
                          description: |-
                            If referring to a piece of an object instead of an entire object, this string
                            should contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2].
                            For example, if the object reference is to a container within a pod, this would take on a value like:
                            "spec.containers{name}" (where "name" refers to the name of the container that triggered
                            the event) or if no container name is specified "spec.containers[2]" (container with
                            index 2 in this pod). This syntax is chosen only to have some well-defined way of
                            referencing a part of an object.
                          type: string
                        kind:
                          description: |-
                            Kind of the referent.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        name:
                          description: |-
                            Name of the referent.
                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                          type: string
                        namespace:
                          description: |-
                            Namespace of the referent.
                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/
                          type: string
                        resourceVersion:
                          description: |-
                            Specific resourceVersion to which this reference is made, if any.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency
                          type: string
                        uid:
                          description: |-
                            UID of the referent.
                            More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids
                          type: string
                      type: object
                      x-kubernetes-map-type: atomic
                    idleEnergyConsumptionWh:
                      description: IdleEnergyConsumptionWh is the idle energy consumption
                      type: string
                    image:
                      description: Image is the container image
                      type: string
                    maxLatencyMs:
                      description: MaxLatencyMs is the maximum latency in milliseconds
                      type: integer
                    name:
                      description: Name is the name of the function
                      type: string
                    resources:
                      description: Resources are the resource requirements
                      properties:
                        claims:
                          description: |-
                            Claims lists the names of resources, defined in spec.resourceClaims,
                            that are used by this container.

                            This is an alpha field and requires enabling the
                            DynamicResourceAllocation feature gate.

                            This field is immutable. It can only be set for containers.
                          items:
                            description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                            properties:
                              name:
                                description: |-
                                  Name must match the name of one entry in pod.spec.resourceClaims of
                                  the Pod where this field is used. It makes that resource available
                                  inside a container.
                                type: string
                              request:
                                description: |-
                                  Request is the name chosen for a request in the referenced claim.
                                  If empty, everything from the claim is made available, otherwise
                                  only the result of this request.
                                type: string
                            required:
                            - name
                            type: object
                          type: array
                          x-kubernetes-list-map-keys:
                          - name
                          x-kubernetes-list-type: map
                        limits:
                          additionalProperties:
                            anyOf:
                            - type: integer
                            - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: |-
                            Limits describes the maximum amount of compute resources allowed.
                            More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          type: object
                        requests:
                          additionalProperties:
                            anyOf:
                            - type: integer
                            - type: string
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                          description: |-
                            Requests describes the minimum amount of compute resources required.
                            If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                            otherwise to an implementation-defined value. Requests cannot exceed Limits.
                            More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          type: object
                      type: object
                  required:
                  - droneRef
                  - image
                  - name
                  type: object
                type: array
            type: object
          status:
            description: ServiceChainStatus defines the observed state of ServiceChain.
            properties:
              totalVfLatency:
                description: TotalVFLatency is the total latency of all VFs
                type: integer
              vfCount:
                description: VFCount is the number of virtual functions in this chain
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.0
  name: virtualfunctions.fanet.restart.io
spec:
  group: fanet.restart.io
  names:
    kind: VirtualFunction
    listKind: VirtualFunctionList
    plural: virtualfunctions
    singular: virtualfunction
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Drone Reference
      jsonPath: .spec.droneRef.name
      name: Drone
      type: string
    - description: Service Chain Name
      jsonPath: .spec.serviceChainName
      name: ServiceChain
      type: string
    - description: Pod Status of the Virtual Function
      jsonPath: .status.statusPODVF
      name: Pod Status
      type: string
    - description: Last Updated Timestamp
      jsonPath: .status.lastUpdated
      name: Last Updated
      type: string
    - description: Current Phase of the Virtual Function
      jsonPath: .status.phase
      name: Phase
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: VirtualFunction is the Schema for the virtualfunctions API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: VirtualFunctionSpec defines the desired state of VirtualFunction.
            properties:
              activeEnergyConsumptionWh:
                description: ActiveEnergyConsumptionWh is the active energy consumption
                type: string
              args:
                description: Args are the arguments for the container
                items:
                  type: string
                type: array
              droneRef:
                description: DroneRef references the drone to deploy on
                properties:
                  apiVersion:
                    description: API version of the referent.
                    type: string
                  fieldPath:
                    description: |-
                      If referring to a piece of an object instead of an entire object, this string
                      should contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2].
                      For example, if the object reference is to a container within a pod, this would take on a value like:
                      "spec.containers{name}" (where "name" refers to the name of the container that triggered
                      the event) or if no container name is specified "spec.containers[2]" (container with
                      index 2 in this pod). This syntax is chosen only to have some well-defined way of
                      referencing a part of an object.
                    type: string
                  kind:
                    description: |-
                      Kind of the referent.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  name:
                    description: |-
                      Name of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                  namespace:
                    description: |-
                      Namespace of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/
                    type: string
                  resourceVersion:
                    description: |-
                      Specific resourceVersion to which this reference is made, if any.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency
                    type: string
                  uid:
                    description: |-
                      UID of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids
                    type: string
                type: object
                x-kubernetes-map-type: atomic
              idleEnergyConsumptionWh:
                description: IdleEnergyConsumptionWh is the idle energy consumption
                type: string
              image:
                description: Image is the container image to use
                type: string
              maxLatencyMs:
                description: MaxLatencyMs is the maximum latency in milliseconds
                type: integer
              resources:
                description: Resources are the resource requirements
                properties:
                  claims:
                    description: |-
                      Claims lists the names of resources, defined in spec.resourceClaims,
                      that are used by this container.

                      This is an alpha field and requires enabling the
                      DynamicResourceAllocation feature gate.

                      This field is immutable. It can only be set for containers.
                    items:
                      description: ResourceClaim references one entry in PodSpec.ResourceClaims.
                      properties:
                        name:
                          description: |-
                            Name must match the name of one entry in pod.spec.resourceClaims of
                            the Pod where this field is used. It makes that resource available
                            inside a container.
                          type: string
                        request:
                          description: |-
                            Request is the name chosen for a request in the referenced claim.
                            If empty, everything from the claim is made available, otherwise
                            only the result of this request.
                          type: string
                      required:
                      - name
                      type: object
                    type: array
                    x-kubernetes-list-map-keys:
                    - name
                    x-kubernetes-list-type: map
                  limits:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: |-
                      Limits describes the maximum amount of compute resources allowed.
                      More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                    type: object
                  requests:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    description: |-
                      Requests describes the minimum amount of compute resources required.
                      If Requests is omitted for a container, it defaults to Limits if that is explicitly specified,
                      otherwise to an implementation-defined value. Requests cannot exceed Limits.
                      More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                    type: object
                type: object
              serviceChainName:
                description: ServiceChainName is the name of the service chain this
                  VF belongs to
                type: string
            required:
            - droneRef
            - image
            type: object
          status:
            description: VirtualFunctionStatus defines the observed state of VirtualFunction.
            properties:
              lastDroneRef:
                description: LastDroneRef tracks the last drone this VF was deployed
                  on
                type: string
              lastUpdated:
                description: LastUpdated is the last update timestamp
                type: string
              phase:
                description: Phase is the current phase of the virtual function
                type: string
              statusPODVF:
                description: StatusPODVF is the status of the pod
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-controller-manager
  namespace: fanet-operator-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-leader-election-role
  namespace: fanet-operator-system
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-drone-admin-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - drones
  verbs:
  - '*'
- apiGroups:
  - fanet.restart.io
  resources:
  - drones/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-drone-editor-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - drones
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - fanet.restart.io
  resources:
  - drones/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-drone-viewer-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - drones
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - fanet.restart.io
  resources:
  - drones/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-fanet-admin-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - fanets
  verbs:
  - '*'
- apiGroups:
  - fanet.restart.io
  resources:
  - fanets/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-fanet-editor-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - fanets
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - fanet.restart.io
  resources:
  - fanets/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-fanet-viewer-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - fanets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - fanet.restart.io
  resources:
  - fanets/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: fanet-operator-manager-role
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - fanet.restart.io
  resources:
  - drones
  - fanets
  - servicechains
  - virtualfunctions
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - fanet.restart.io
  resources:
  - drones/finalizers
  - fanets/finalizers
  - servicechains/finalizers
  - virtualfunctions/finalizers
  verbs:
  - update
- apiGroups:
  - fanet.restart.io
  resources:
  - drones/status
  - fanets/status
  - servicechains/status
  - virtualfunctions/status
  verbs:
  - get
  - patch
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: fanet-operator-metrics-auth-role
rules:
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: fanet-operator-metrics-reader
rules:
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-servicechain-admin-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - servicechains
  verbs:
  - '*'
- apiGroups:
  - fanet.restart.io
  resources:
  - servicechains/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-servicechain-editor-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - servicechains
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - fanet.restart.io
  resources:
  - servicechains/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-servicechain-viewer-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - servicechains
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - fanet.restart.io
  resources:
  - servicechains/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-virtualfunction-admin-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - virtualfunctions
  verbs:
  - '*'
- apiGroups:
  - fanet.restart.io
  resources:
  - virtualfunctions/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-virtualfunction-editor-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - virtualfunctions
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - fanet.restart.io
  resources:
  - virtualfunctions/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-virtualfunction-viewer-role
rules:
- apiGroups:
  - fanet.restart.io
  resources:
  - virtualfunctions
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - fanet.restart.io
  resources:
  - virtualfunctions/status
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-leader-election-rolebinding
  namespace: fanet-operator-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: fanet-operator-leader-election-role
subjects:
- kind: ServiceAccount
  name: fanet-operator-controller-manager
  namespace: fanet-operator-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
  name: fanet-operator-manager-rolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: fanet-operator-manager-role
subjects:
- kind: ServiceAccount
  name: fanet-operator-controller-manager
  namespace: fanet-operator-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: fanet-operator-metrics-auth-rolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: fanet-operator-metrics-auth-role
subjects:
- kind: ServiceAccount
  name: fanet-operator-controller-manager
  namespace: fanet-operator-system
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
    control-plane: controller-manager
  name: fanet-operator-controller-manager-metrics-service
  namespace: fanet-operator-system
spec:
  ports:
  - name: https
    port: 8443
    protocol: TCP
    targetPort: 8443
  selector:
    app.kubernetes.io/name: fanet-operator
    control-plane: controller-manager
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: fanet-operator
    control-plane: controller-manager
  name: fanet-operator-controller-manager
  namespace: fanet-operator-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: fanet-operator
      control-plane: controller-manager
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/default-container: manager
      labels:
        app.kubernetes.io/name: fanet-operator
        control-plane: controller-manager
    spec:
      containers:
      - args:
        - --metrics-bind-address=:8443
        - --leader-elect
        - --health-probe-bind-address=:8081
        command:
        - /manager
        image: quay.io/massigollo/fanet-operator-controller:latest
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8081
          initialDelaySeconds: 15
          periodSeconds: 20
        name: manager
        ports: []
        readinessProbe:
          httpGet:
            path: /readyz
            port: 8081
          initialDelaySeconds: 5
          periodSeconds: 10
        resources:
          limits:
            cpu: 500m
            memory: 128Mi
          requests:
            cpu: 10m
            memory: 64Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
        volumeMounts: []
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      serviceAccountName: fanet-operator-controller-manager
      terminationGracePeriodSeconds: 10
      volumes: []
